---
import ApartmentSlide from "./ApartmentSlide.astro";
import room1 from "../assets/room_1.webp";
import room2 from "../assets/room_2.webp";
import room3 from "../assets/room_3.webp";
---

<section
  id="apartaments"
  class="bg-emerald-50 px-6 py-30 md:px-20 md:py-44 lg:py-56 xl:py-72"
>
  <div class="container m-auto">
    <div class="mb-4">
      <span
        class="text-sm font-medium tracking-widest text-emerald-950/80 uppercase"
        >Apartaments</span
      >
    </div>

    <h2
      class="font-serif text-5xl tracking-tight text-balance text-emerald-950 lg:text-6xl xl:text-7xl"
    >
      Lorem ipsum dolor sit amet
    </h2>

    <p class="xl: mt-20 text-lg text-emerald-950/80 sm:text-xl/loose">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
      commodo consequat.
    </p>

    <div
      id="apartmentsSlideControls"
      class="mt-20 mb-8 flex justify-center gap-4 lg:justify-start"
    >
      <button class="btn btn-primary btn-circle btn-outline" data-index="0">
        1
      </button>
      <button class="btn btn-primary btn-circle btn-outline" data-index="1">
        2
      </button>
    </div>

    <swiper-container
      id="apartmentsSwiper"
      allow-touch-move="false"
      class="border border-emerald-950"
    >
      <swiper-slide>
        <ApartmentSlide
          title="Apartament 1"
          description="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
          facilities={[
            "2 llits dobles",
            "1 bany complet",
            "Televisor",
            "Wifi",
            "Xemeneia",
            "Cuina equipada",
            "Vistes a la muntanya",
            "Calefacció",
          ]}
          images={[room1, room2, room3]}
        />
      </swiper-slide>
      <swiper-slide>
        <ApartmentSlide
          title="Apartament 2"
          description="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
          facilities={[
            "2 llits dobles",
            "1 bany complet",
            "Televisor",
            "Wifi",
            "Xemeneia",
            "Cuina equipada",
            "Vistes a la muntanya",
            "Calefacció",
          ]}
          images={[room1, room2, room3]}
        />
      </swiper-slide>
    </swiper-container>
  </div>
</section>

<script
  src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-element-bundle.min.js"
></script>

<script>
  import type { SwiperContainer } from "swiper/element";

  let swiperEl: SwiperContainer | null = null;

  window.addEventListener("DOMContentLoaded", () => {
    swiperEl = document.getElementById(
      "apartmentsSwiper",
    ) as SwiperContainer | null;

    const buttons = document.querySelectorAll(
      "#apartmentsSlideControls button",
    );

    buttons.forEach((button) => {
      button.addEventListener("click", () => {
        const index = Number(button.getAttribute("data-index"));
        changeSlide(index);
      });
    });
  });

  function changeSlide(index: number): void {
    swiperEl?.swiper.slideTo(index);
  }
</script>
